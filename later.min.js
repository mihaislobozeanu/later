later=(()=>{let K={version:"1.0.0"},r=(Array.prototype.indexOf||(Array.prototype.indexOf=function(n){if(null==this)throw new TypeError;var r=Object(this),a=r.length>>>0;if(0!=a){let t=0;if(1<arguments.length&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t)))),!(t>=a)){let e=0<=t?t:Math.max(a-Math.abs(t),0);for(;e<a;e++)if(e in r&&r[e]===n)return e}}return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),K.array={},K.array.sort=function(e,t){e.sort(function(e,t){return+e-+t}),t&&0===e[0]&&e.push(e.shift())},K.array.next=function(t,n,r){let a,u=0;var i=0!==r[0];for(let e=n.length-1;-1<e;--e){if((a=n[e])===t)return a;if(!(t<a||0===a&&i&&r[1]>t))break;u=e}return n[u]},K.array.nextInvalid=function(e,t,n){var r=n[0],a=n[1],u=t.length,i=0===t[u-1]&&0!==r?a:0;let o=e,l=t.indexOf(e);for(var d=o;o===(t[l]||i);)if(++o>a&&(o=r),++l===u&&(l=0),o===d)return;return o},K.array.prev=function(t,n,r){var a,u=n.length,i=0!==r[0];let o=u-1;for(let e=0;e<u;e++){if((a=n[e])===t)return a;if(!(a<t||0===a&&i&&r[1]<t))break;o=e}return n[o]},K.array.prevInvalid=function(e,t,n){var r=n[0],a=n[1],u=t.length,i=0===t[u-1]&&0!==r?a:0;let o=e,l=t.indexOf(e);for(var d=o;o===(t[l]||i);)if(--o<r&&(o=a),-1===--l&&(l=u-1),o===d)return;return o},K.day=K.D={name:"day",range:86400,val:function(e){return e.D||(e.D=K.date.getDate.call(e))},isValid:function(e,t){return K.D.val(e)===(t||K.D.extent(e)[1])},extent:function(e){if(e.DExtent)return e.DExtent;var t=K.M.val(e);let n=K.DAYS_IN_MONTH[t-1];return 2===t&&366===K.dy.extent(e)[1]&&(n+=1),e.DExtent=[1,n]},start:function(e){return e.DStart||(e.DStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)))},end:function(e){return e.DEnd||(e.DEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)))},next:function(e,t){t=t>K.D.extent(e)[1]?1:t;var e=K.date.nextRollover(e,t,K.D,K.M),n=K.D.extent(e)[1];return t=n<t?1:t||n,K.date.next(K.Y.val(e),K.M.val(e),t)},prev:function(e,t){var e=K.date.prevRollover(e,t,K.D,K.M),n=K.D.extent(e)[1];return K.date.prev(K.Y.val(e),K.M.val(e),!(n<t)&&t||n)}},K.dayEx=K.DX={rangeStart:new Date(2015,0,1),rangeEnd:new Date(2050,0,1),name:"dayEx",range:86400,val:function(e){return e.DX||(e.DX=K.date.diffInDays(K.DX.rangeStart,e))},isValid:function(e,t){return K.DX.val(e)===(t||K.DX.extent(e)[1])},extent:function(e){var t;return e.DXExtent||(t=Math.floor(K.DX.rangeEnd.getTime()/K.DAY)-Math.floor(K.DX.rangeStart.getTime()/K.DAY),e.DXExtent=[1,t])},start:function(e){return e.DXStart||(e.DXStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)))},end:function(e){return e.DXEnd||(e.DXEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)))},next:function(e,t){return new Date(K.DX.rangeStart.getTime()+t*K.DAY)},prev:function(e,t){return new Date(K.DX.rangeStart.getTime()+t*K.DAY)}},K.weekday=K.WD={name:"weekday",range:86400,val:function(e){var t,n;return e.WD||(t=K.WD.weekdaysInMonth(e),n=K.date.getDate.call(e),e.WD=t.map[n].value+1)},weekdaysInMonth:function(e){return e.weekdaysInMonth||(e.weekdaysInMonth=K.date.weekdaysInMonth(e))},isValid:function(e,t){return K.WD.val(e)===(t||K.WD.extent(e)[1])&&(t=K.WD.weekdaysInMonth(e),e=K.date.getDate.call(e),t.map[e].valid)},extent:function(e){var t;return e.WDExtent||(t=K.WD.weekdaysInMonth(e),e.WDExtent=[1,t.values.length])},start:function(e){return e.WDStart||(e.WDStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)))},end:function(e){return e.WDEnd||(e.WDEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)))},next:function(e,t){var n=K.WD.extent(e)[1],r=(t=n<t?1:t,K.WD.weekdaysInMonth(e)),a=r.values[(t||n)-1],e=K.date.nextRollover(e,a,K.D,K.M);return t=(n=K.WD.extent(e)[1])<t?1:t||n,a=(r=K.WD.weekdaysInMonth(e)).values[t-1],K.date.next(K.Y.val(e),K.M.val(e),a)},prev:function(e,t){var n=K.WD.weekdaysInMonth(e).values[(t||r)-1],e=K.date.prevRollover(e,n,K.D,K.M),r=K.WD.extent(e)[1];return t=!(r<t)&&t||r,n=K.WD.weekdaysInMonth(e).values[t-1],K.date.prev(K.Y.val(e),K.M.val(e),n)}},K.weekendDay=K.WED={name:"weekendDay",range:86400,val:function(e){var t,n;return e.WED||(t=K.WED.weekendDaysInMonth(e),n=K.date.getDate.call(e),e.WED=t.map[n].value+1)},weekendDaysInMonth:function(e){return e.weekendDaysInMonth||(e.weekendDaysInMonth=K.date.weekendDaysInMonth(e))},isValid:function(e,t){return K.WED.val(e)===(t||K.WED.extent(e)[1])&&(t=K.WED.weekendDaysInMonth(e),e=K.date.getDate.call(e),t.map[e].valid)},extent:function(e){var t;return e.WDExtent||(t=K.WED.weekendDaysInMonth(e),e.WDExtent=[1,t.values.length])},start:function(e){return e.WDStart||(e.WDStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)))},end:function(e){return e.WDEnd||(e.WDEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)))},next:function(e,t){var n=K.WED.extent(e)[1],r=(t=n<t?1:t,K.WED.weekendDaysInMonth(e)),a=r.values[(t||n)-1],e=K.date.nextRollover(e,a,K.D,K.M);return t=(n=K.WED.extent(e)[1])<t?1:t||n,a=(r=K.WED.weekendDaysInMonth(e)).values[t-1],K.date.next(K.Y.val(e),K.M.val(e),a)},prev:function(e,t){var n=K.WD.weekendDaysInMonth(e).values[(t||r)-1],e=K.date.prevRollover(e,n,K.D,K.M),r=K.WD.extent(e)[1];return t=!(r<t)&&t||r,n=K.WD.weekendDaysInMonth(e).values[t-1],K.date.prev(K.Y.val(e),K.M.val(e),n)}},K.dayOfWeekCount=K.dc={name:"day of week count",range:604800,val:function(e){return e.dc||(e.dc=Math.floor((K.D.val(e)-1)/7)+1)},isValid:function(e,t){return K.dc.val(e)===t||0===t&&K.D.val(e)>K.D.extent(e)[1]-7},extent:function(e){return e.dcExtent||(e.dcExtent=[1,Math.ceil(K.D.extent(e)[1]/7)])},start:function(e){return e.dcStart||(e.dcStart=K.date.next(K.Y.val(e),K.M.val(e),Math.max(1,7*(K.dc.val(e)-1)+1||1)))},end:function(e){return e.dcEnd||(e.dcEnd=K.date.prev(K.Y.val(e),K.M.val(e),Math.min(7*K.dc.val(e),K.D.extent(e)[1])))},next:function(e,t){t=t>K.dc.extent(e)[1]?1:t;var n=K.date.nextRollover(e,t,K.dc,K.M),r=(t=K.dc.extent(n)[1]<t?1:t,K.date.next(K.Y.val(n),K.M.val(n),0===t?K.D.extent(n)[1]-6:1+7*(t-1)));return r.getTime()<=e.getTime()?(n=K.M.next(e,K.M.val(e)+1),K.date.next(K.Y.val(n),K.M.val(n),0===t?K.D.extent(n)[1]-6:1+7*(t-1))):r},prev:function(e,t){var e=K.date.prevRollover(e,t,K.dc,K.M),n=K.dc.extent(e)[1];return t=!(n<t)&&t||n,K.dc.end(K.date.prev(K.Y.val(e),K.M.val(e),1+7*(t-1)))}},K.dayOfWeek=K.dw=K.d={name:"day of week",range:86400,val:function(e){return e.dw||(e.dw=K.date.getDay.call(e)+1)},isValid:function(e,t){return K.dw.val(e)===(t||7)},extent:function(){return[1,7]},start:function(e){return K.D.start(e)},end:function(e){return K.D.end(e)},next:function(e,t){return t=7<t?1:t||7,K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)+(t-K.dw.val(e))+(t<=K.dw.val(e)?7:0))},prev:function(e,t){return t=!(7<t)&&t||7,K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)+(t-K.dw.val(e))+(t>=K.dw.val(e)?-7:0))}},K.dayOfYear=K.dy={name:"day of year",range:86400,val:function(e){return e.dy||(e.dy=Math.ceil(1+(K.D.start(e).getTime()-K.Y.start(e).getTime())/K.DAY))},isValid:function(e,t){return K.dy.val(e)===(t||K.dy.extent(e)[1])},extent:function(e){var t=K.Y.val(e);return e.dyExtent||(e.dyExtent=[1,t%4?365:366])},start:function(e){return K.D.start(e)},end:function(e){return K.D.end(e)},next:function(e,t){t=t>K.dy.extent(e)[1]?1:t;var e=K.date.nextRollover(e,t,K.dy,K.Y),n=K.dy.extent(e)[1];return t=n<t?1:t||n,K.date.next(K.Y.val(e),K.M.val(e),t)},prev:function(e,t){var e=K.date.prevRollover(e,t,K.dy,K.Y),n=K.dy.extent(e)[1];return t=!(n<t)&&t||n,K.date.prev(K.Y.val(e),K.M.val(e),t)}},K.hour=K.h={name:"hour",range:3600,val:function(e){return e.h||(e.h=K.date.getHour.call(e))},isValid:function(e,t){return K.h.val(e)===t},extent:function(){return[0,23]},start:function(e){return e.hStart||(e.hStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e),K.h.val(e)))},end:function(e){return e.hEnd||(e.hEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e),K.h.val(e)))},next:function(e,t){t=23<t?0:t;let n=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)+(t<=K.h.val(e)?1:0),t);return n=!K.date.isUTC&&n.getTime()<=e.getTime()?K.date.next(K.Y.val(n),K.M.val(n),K.D.val(n),t+1):n},prev:function(e,t){return t=23<t?23:t,K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)+(t>=K.h.val(e)?-1:0),t)}},K.minute=K.m={name:"minute",range:60,val:function(e){return e.m||(e.m=K.date.getMin.call(e))},isValid:function(e,t){return K.m.val(e)===t},extent:function(e){return[0,59]},start:function(e){return e.mStart||(e.mStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e),K.h.val(e),K.m.val(e)))},end:function(e){return e.mEnd||(e.mEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e),K.h.val(e),K.m.val(e)))},next:function(e,t){var n=K.m.val(e),r=K.s.val(e),t=59<t?60-n:t<=n?60-n+t:t-n;let a=new Date(e.getTime()+t*K.MIN-r*K.SEC);return a=!K.date.isUTC&&a.getTime()<=e.getTime()?new Date(e.getTime()+(t+120)*K.MIN-r*K.SEC):a},prev:function(e,t){return t=59<t?59:t,K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e),K.h.val(e)+(t>=K.m.val(e)?-1:0),t)}},K.month=K.M={name:"month",range:2629740,val:function(e){return e.M||(e.M=K.date.getMonth.call(e)+1)},isValid:function(e,t){return K.M.val(e)===(t||12)},extent:function(){return[1,12]},start:function(e){return e.MStart||(e.MStart=K.date.next(K.Y.val(e),K.M.val(e)))},end:function(e){return e.MEnd||(e.MEnd=K.date.prev(K.Y.val(e),K.M.val(e)))},next:function(e,t){return t=12<t?1:t||12,K.date.next(K.Y.val(e)+(t>K.M.val(e)?0:1),t)},prev:function(e,t){return t=!(12<t)&&t||12,K.date.prev(K.Y.val(e)-(t>=K.M.val(e)?1:0),t)}},K.monthEx=K.MX={name:"monthEx",range:2629740,val:function(e){return e.MX||(e.MX=K.date.diffInMonths(K.MX.start(K.DX.rangeStart),K.MX.start(e)))},isValid:function(e,t){return K.MX.val(e)===(t||K.MX.extent(e)[1])},extent:function(e){var t;return e.MXExtent||(t=K.date.diffInMonths(K.MX.start(K.DX.rangeStart),K.MX.start(K.DX.rangeEnd)),e.MXExtent=[1,t])},start:function(e){return e.MXStart||(e.MXStart=K.date.startOfMonth(e))},end:function(e){return e.MXEnd||(e.MXEnd=K.date.endOfMonth(e))},next:function(e,t){var n=new Date(K.MX.start(K.DX.rangeStart));return n.setMonth(n.getMonth()+t),n},prev:function(e,t){var n=new Date(K.MX.start(K.DX.rangeStart));return n.setMonth(n.getMonth()+t),n.setTime(n.getTime()-K.SEC),n}},K.second=K.s={name:"second",range:1,val:function(e){return e.s||(e.s=K.date.getSec.call(e))},isValid:function(e,t){return K.s.val(e)===t},extent:function(){return[0,59]},start:function(e){return e},end:function(e){return e},next:function(e,t){var n=K.s.val(e),t=59<t?60-n:t<=n?60-n+t:t-n;let r=new Date(e.getTime()+t*K.SEC);return r=!K.date.isUTC&&r.getTime()<=e.getTime()?new Date(e.getTime()+(t+7200)*K.SEC):r},prev:function(e,t,n){return t=59<t?59:t,K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e),K.h.val(e),K.m.val(e)+(t>=K.s.val(e)?-1:0),t)}},K.time=K.t={name:"time",range:1,val:function(e){return e.t||(e.t=3600*K.h.val(e)+60*K.m.val(e)+K.s.val(e))},isValid:function(e,t){return K.t.val(e)===t},extent:function(){return[0,86399]},start:function(e){return e},end:function(e){return e},next:function(e,t){t=86399<t?0:t;let n=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)+(t<=K.t.val(e)?1:0),0,0,t);return n=!K.date.isUTC&&n.getTime()<e.getTime()?K.date.next(K.Y.val(n),K.M.val(n),K.D.val(n),K.h.val(n),K.m.val(n),t+7200):n},prev:function(e,t){return t=86399<t?86399:t,K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)+(t>=K.t.val(e)?-1:0),0,0,t)}},K.weekOfMonth=K.wm={name:"week of month",range:604800,val:function(e){return e.wm||(e.wm=(K.D.val(e)+(K.dw.val(K.M.start(e))-1)+(7-K.dw.val(e)))/7)},isValid:function(e,t){return K.wm.val(e)===(t||K.wm.extent(e)[1])},extent:function(e){return e.wmExtent||(e.wmExtent=[1,(K.D.extent(e)[1]+(K.dw.val(K.M.start(e))-1)+(7-K.dw.val(K.M.end(e))))/7])},start:function(e){return e.wmStart||(e.wmStart=K.date.next(K.Y.val(e),K.M.val(e),Math.max(K.D.val(e)-K.dw.val(e)+1,1)))},end:function(e){return e.wmEnd||(e.wmEnd=K.date.prev(K.Y.val(e),K.M.val(e),Math.min(K.D.val(e)+(7-K.dw.val(e)),K.D.extent(e)[1])))},next:function(e,t){t=t>K.wm.extent(e)[1]?1:t;var e=K.date.nextRollover(e,t,K.wm,K.M),n=K.wm.extent(e)[1];return t=n<t?1:t||n,K.date.next(K.Y.val(e),K.M.val(e),Math.max(1,7*(t-1)-(K.dw.val(e)-2)))},prev:function(e,t){var e=K.date.prevRollover(e,t,K.wm,K.M),n=K.wm.extent(e)[1];return t=!(n<t)&&t||n,K.wm.end(K.date.next(K.Y.val(e),K.M.val(e),Math.max(1,7*(t-1)-(K.dw.val(e)-2))))}},K.weekOfYear=K.wy={name:"week of year (ISO)",range:604800,val:function(e){var t,n;return e.wy||(t=K.dw.next(K.wy.start(e),5),n=K.dw.next(K.Y.prev(t,K.Y.val(t)-1),5),e.wy=1+Math.ceil((t.getTime()-n.getTime())/K.WEEK))},isValid:function(e,t){return K.wy.val(e)===(t||K.wy.extent(e)[1])},extent:function(e){var t,n;return e.wyExtent||(n=K.dw.next(K.wy.start(e),5),t=K.dw.val(K.Y.start(n)),n=K.dw.val(K.Y.end(n)),e.wyExtent=[1,5===t||5===n?53:52])},start:function(e){return e.wyStart||(e.wyStart=K.date.next(K.Y.val(e),K.M.val(e),K.D.val(e)-(1<K.dw.val(e)?K.dw.val(e)-2:6)))},end:function(e){return e.wyEnd||(e.wyEnd=K.date.prev(K.Y.val(e),K.M.val(e),K.D.val(e)+(1<K.dw.val(e)?8-K.dw.val(e):0)))},next:function(e,t){t=t>K.wy.extent(e)[1]?1:t;e=K.dw.next(K.wy.start(e),5);let n=K.date.nextRollover(e,t,K.wy,K.Y);1!==K.wy.val(n)&&(n=K.dw.next(n,2));var e=K.wy.extent(n)[1],r=K.wy.start(n);return t=e<t?1:t||e,K.date.next(K.Y.val(r),K.M.val(r),K.D.val(r)+7*(t-1))},prev:function(e,t){e=K.dw.next(K.wy.start(e),5);let n=K.date.prevRollover(e,t,K.wy,K.Y);1!==K.wy.val(n)&&(n=K.dw.next(n,2));var e=K.wy.extent(n)[1],r=K.wy.end(n);return t=!(e<t)&&t||e,K.wy.end(K.date.next(K.Y.val(r),K.M.val(r),K.D.val(r)+7*(t-1)))}},K.weekEx=K.WX={name:"weekEx",range:604800,val:function(e){return e.WX||(e.WX=Math.ceil(K.date.diffInDays(K.WX.start(K.DX.rangeStart),K.WX.start(e))/7))},isValid:function(e,t){return K.WX.val(e)===(t||K.WX.extent(e)[1])},extent:function(e){var t;return e.WXExtent||(t=Math.floor(K.date.diffInDays(K.WX.start(K.DX.rangeStart),K.WX.start(K.DX.rangeEnd))/7),e.WXExtent=[1,t])},start:function(e){return e.WXStart||(e.WXStart=K.date.startOfWeek(e))},end:function(e){return e.WXEnd||(e.WXEnd=K.date.endOfWeek(e))},next:function(e,t){return K.date.timeless(new Date(K.WX.start(K.DX.rangeStart).getTime()+t*K.WEEK))},prev:function(e,t){t=K.date.timeless(new Date(K.WX.start(K.DX.rangeStart).getTime()+t*K.WEEK));return t.setTime(t.getTime()-K.SEC),t}},K.year=K.Y={name:"year",range:31556900,val:function(e){return e.Y||(e.Y=K.date.getYear.call(e))},isValid:function(e,t){return K.Y.val(e)===t},extent:function(){return[1970,2099]},start:function(e){return e.YStart||(e.YStart=K.date.next(K.Y.val(e)))},end:function(e){return e.YEnd||(e.YEnd=K.date.prev(K.Y.val(e)))},next:function(e,t){return t>K.Y.val(e)&&t<=K.Y.extent()[1]?K.date.next(t):K.NEVER},prev:function(e,t){return t<K.Y.val(e)&&t>=K.Y.extent()[0]?K.date.prev(t):K.NEVER}},K.fullDate=K.fd={name:"full date",range:1,val:function(e){return e.fd||(e.fd=e.getTime())},isValid:function(e,t){return K.fd.val(e)===t},extent:function(){return[0,3250368e7]},start:function(e){return e},end:function(e){return e},next:function(e,t){return K.fd.val(e)<t?new Date(t):K.NEVER},prev:function(e,t){return K.fd.val(e)>t?new Date(t):K.NEVER}},K.modifier={},K.modifier.after=K.modifier.a=function(n,e){let r=e[0];return{name:"after "+n.name,range:(n.extent(new Date)[1]-r)*n.range,val:n.val,isValid:function(e,t){return this.val(e)>=r},extent:n.extent,start:n.start,end:n.end,next:function(e,t){return t!=r&&(t=n.extent(e)[0]),n.next(e,t)},prev:function(e,t){return t=t===r?n.extent(e)[1]:r-1,n.prev(e,t)}}},K.modifier.before=K.modifier.b=function(n,e){let r=e[e.length-1];return{name:"before "+n.name,range:n.range*(r-1),val:n.val,isValid:function(e,t){return this.val(e)<r},extent:n.extent,start:n.start,end:n.end,next:function(e,t){return t=t===r?n.extent(e)[0]:r,n.next(e,t)},prev:function(e,t){return t=t===r?r-1:n.extent(e)[1],n.prev(e,t)}}},K.compile=function(e){let d=[],f=0,v;for(var t in e){var n=t.split("_"),r=n[0],n=n[1],t=e[t],n=n?K.modifier[n](K[r],t):K[r];d.push({constraint:n,vals:t}),f++}return d.sort(function(e,t){e=e.constraint.range,t=t.constraint.range;return t<e?-1:e<t?1:0}),v=d[f-1].constraint,{start:function(t,e){let n=e;var r=K.array[t];let a=1e3,u;for(;a--&&!u&&n;){u=!0;for(let e=0;e<f;e++){var i=d[e].constraint,o=i.val(n),l=i.extent(n),o=r(o,d[e].vals,l);if(!i.isValid(n,o)){n=i[t](n,o),u=!1;break}}}return n=n!==K.NEVER?"next"===t?v.start(n):v.end(n):n},end:function(t,n){let r;var a=K.array[t+"Invalid"],u="next"===t?function(e,t){return e.getTime()>t.getTime()}:function(e,t){return t.getTime()>e.getTime()};for(let e=f-1;0<=e;e--){var i=d[e].constraint,o=i.val(n),l=i.extent(n),o=a(o,d[e].vals,l);void 0===o||!(l=i[t](n,o))||r&&!u(r,l)||(r=l)}return r},tick:function(e,t){return new Date("next"===e?v.end(t).getTime()+K.SEC:v.start(t).getTime()-K.SEC)},tickStart:function(e){return v.start(e)}}},K.schedule=function(t){if(!t)throw new Error("Missing schedule definition.");if(!t.schedules)throw new Error("Definition must include at least one schedule.");let U=[],n=t.schedules.length,F=[],H=t.exceptions?t.exceptions.length:0;for(let e=0;e<n;e++)U.push(K.compile(t.schedules[e]));for(let e=0;e<H;e++)F.push(K.compile(t.exceptions[e]));function r(e,t,n,r,a){var u=P(e),i=[],o=[],l=[],d="next"===e,f=d?0:1,v=d?1:0;let s,c,h,D=1e3,m=t;if(!(n=n?new Date(n):new Date)||!n.getTime())throw new Error("Invalid start date.");var x=e,w=U,g=i,y=n;for(let e=0,t=w.length;e<t;e++)g[e]=w[e].start(x,y);var M=e,p=F,V=o,A=n;P(M);for(let e=0,t=p.length;e<t;e++){var E=p[e].start(M,A);V[e]=E?[E,p[e].end(M,E)]:K.NEVER}for(;D--&&m&&(s=((n,r)=>{let a=n[0];for(let e=1,t=n.length;e<t;e++)n[e]&&r(a,n[e])&&(a=n[e]);return a})(i,u))&&(!r||!u(s,r));){if(H){k=O=T=W=b=Y=void 0;var k,Y=e,b=F,W=o,T=s,O=P(Y);for(let e=0,t=b.length;e<t;e++)W[e]&&!O(W[e][0],T)&&(k=b[e].start(Y,T),W[e]=k?[k,b[e].end(Y,k)]:K.NEVER);if(c=((e,n,r)=>{let a=P(e),u;for(let e=0,t=n.length;e<t;e++){var i=n[e];!i||a(i[0],r)||i[1]&&!a(i[1],r)||u&&!a(i[1],u)||(u=i[1])}return u})(e,o,s)){j(e,U,i,c);continue}}if(a){var S=((n,r)=>{let a;for(let e=0,t=n.length;e<t;e++)!n[e]||a&&!r(a,n[e][0])||(a=n[e][0]);return a})(o,u),S=(c=((n,r,a,u,i)=>{let o=P(n),l;for(let e=0,t=r.length;e<t;e++){var d=a[e];if(d&&d.getTime()===u.getTime()){d=r[e].end(n,d);if(i&&(!d||o(d,i)))return i;l&&!o(d,l)||(l=d)}}return l})(e,U,i,s,S),d?[new Date(Math.max(n,s)),c?new Date(r?Math.min(c,r):c):void 0]:[c?new Date(r?Math.max(r,c.getTime()+K.SEC):c.getTime()+K.SEC):void 0,new Date(Math.min(n,s.getTime()+K.SEC))]);if(h&&S[f].getTime()===h[v].getTime()?(h[v]=S[v],m++):(h=S,l.push(h)),!c)break;j(e,U,i,c)}else{l.push(d?new Date(Math.max(n,s)):((n,r,a,u)=>{let i;for(let e=0,t=r.length;e<t;e++)if(r[e]&&r[e].getTime()===a.getTime()){var o=n[e].tickStart(a);if(u&&o<u)return u;(!i||o>i)&&(i=o)}return i})(U,i,s,r)),R=N=I=X=void 0;var X=e,I=U,N=i,R=s;for(let e=0,t=I.length;e<t;e++)N[e]&&N[e].getTime()===R.getTime()&&(N[e]=I[e].start(X,I[e].tick(X,R)))}m--}for(let e=0,t=l.length;e<t;e++){var C=l[e];l[e]="[object Array]"===Object.prototype.toString.call(C)?[L(C[0]),L(C[1])]:L(C)}return 0===l.length?K.NEVER:1===t?l[0]:l}function L(e){if(e instanceof Date&&!isNaN(e.valueOf()))return new Date(e)}function j(n,r,a,u){var i=P(n);for(let e=0,t=r.length;e<t;e++)a[e]&&!i(a[e],u)&&(a[e]=r[e].start(n,u))}function P(e){return"next"===e?function(e,t){return!t||e.getTime()>t.getTime()}:function(e,t){return!e||t.getTime()>e.getTime()}}return{isValid:function(e){return r("next",1,e,e)!==K.NEVER},next:function(e,t,n){return r("next",e||1,t,n)},prev:function(e,t,n){return r("prev",e||1,t,n)},nextRange:function(e,t,n){return r("next",e||1,t,n,!0)},prevRange:function(e,t,n){return r("prev",e||1,t,n,!0)}}},K.setTimeout=function(a,e){let u=K.schedule(e),i;return a&&function e(){let t=Date.now(),n=u.next(2,t);if(!n[0])return void(i=void 0);let r=n[0].getTime()-t;r<1e3&&(r=n[1]?n[1].getTime()-t:1e3);i=r<2147483647?setTimeout(a,r):setTimeout(e,2147483647)}(),{isDone:function(){return!i},clear:function(){clearTimeout(i)}}},K.setInterval=function(r,a){if(r){let t=K.setTimeout(function e(){n||(r(),t=K.setTimeout(e,a))},a),n=t.isDone();return{isDone:function(){return t.isDone()},clear:function(){n=!0,t.clear()}}}},K.date={},K.date.timezone=function(e){K.date.build=e?function(e,t,n,r,a,u){return new Date(e,t,n,r,a,u)}:function(e,t,n,r,a,u){return new Date(Date.UTC(e,t,n,r,a,u))};var t=e?"get":"getUTC",n=Date.prototype;K.date.getYear=n[t+"FullYear"],K.date.getMonth=n[t+"Month"],K.date.getDate=n[t+"Date"],K.date.getDay=n[t+"Day"],K.date.getHour=n[t+"Hours"],K.date.getMin=n[t+"Minutes"],K.date.getSec=n[t+"Seconds"],K.date.isUTC=!e},K.date.UTC=function(){K.date.timezone(!1)},K.date.localTime=function(){K.date.timezone(!0)},K.date.UTC(),K.SEC=1e3,K.MIN=60*K.SEC,K.HOUR=60*K.MIN,K.DAY=24*K.HOUR,K.WEEK=7*K.DAY,K.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],K.NEVER=0,K.date.next=function(e,t,n,r,a,u){return K.date.build(e,void 0!==t?t-1:0,void 0!==n?n:1,r||0,a||0,u||0)},K.date.nextRollover=function(e,t,n,r){var a=n.val(e),n=n.extent(e)[1];return(t||n)<=a||n<t?new Date(r.end(e).getTime()+K.SEC):r.start(e)},K.date.prev=function(e,t,n,r,a,u){var i=arguments.length;return t=i<2?11:t-1,n=i<3?K.D.extent(K.date.next(e,t+1))[1]:n,r=i<4?23:r,a=i<5?59:a,u=i<6?59:u,K.date.build(e,t,n,r,a,u)},K.date.prevRollover=function(e,t,n,r){return n.val(e)<=t||!t?r.start(r.prev(e,r.val(e)-1)):r.start(e)},K.date.diffInDays=function(e,t){return Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/K.DAY)},K.date.startOfWeek=function(e){var e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=e.getDay(),t=e.getTime()-t*K.DAY;return e.setTime(t),e},K.date.endOfWeek=function(e){e=K.date.startOfWeek(e);return e.setTime(e.getTime()+K.WEEK-K.SEC),e},K.date.diffInMonths=function(e,t){t=12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth());return t<=0?0:t},K.date.startOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},K.date.endOfMonth=function(e){e=new Date(e.getFullYear(),e.getMonth()+1,1);return e.setTime(e.getTime()-K.SEC),e},{weekDays:{},weekendDays:{}});function a(e,t){var n=new Date(e,t+1,0).getDate(),r=new Date(e,t,1).getDay()-1,a={weekDays:{values:[],map:{}},weekendDays:{values:[],map:{}}};let u=-1,i=-1;for(let e=1;e<=n;e++){var o=(e+r)%7;0==o||6==o?(a.weekendDays.map[e]={value:u=a.weekendDays.values.push(e)-1,valid:!0},a.weekDays.map[e]={value:i+1,valid:!1}):(a.weekDays.map[e]={value:i=a.weekDays.values.push(e)-1,valid:!0},a.weekendDays.map[e]={value:u+1,valid:!1})}return a}return K.date.weekdaysInMonth=function(e){var t=e.getFullYear(),e=e.getMonth(),n=100*t+e;return(r[n]=r[n]||a(t,e)).weekDays},K.date.weekendDaysInMonth=function(e){var t=e.getFullYear(),e=e.getMonth(),n=100*t+e;return(r[n]=r[n]||a(t,e)).weekendDays},K.date.timeless=function(e){e=new Date(e);return e.setHours(0,0,0,0),e},K.parse={},K.parse.cron=function(a,u){let c={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12,SUN:1,MON:2,TUE:3,WED:4,THU:5,FRI:6,SAT:7},e={"* * * * * *":"0/1 * * * * *","@YEARLY":"0 0 1 1 *","@ANNUALLY":"0 0 1 1 *","@MONTHLY":"0 0 1 * *","@WEEKLY":"0 0 * * 0","@DAILY":"0 0 * * *","@HOURLY":"0 * * * *"},i={s:[0,0,59],m:[1,0,59],h:[2,0,23],D:[3,1,31],M:[4,1,12],Y:[6,1970,2099],d:[5,1,7,1]};function h(e,t,n){return isNaN(e)?c[e]||null:Math.min(+e+(t||0),n||9999)}function D(e,t,n,r,a){let u=n;for(e[t]||(e[t]=[]);u<=r;)e[t].indexOf(u)<0&&e[t].push(u),u+=a||1;e[t].sort(function(e,t){return e-t})}function m(e,t,n,r){(t.d&&!t.dc||t.dc&&t.dc.indexOf(r)<0)&&(e.push((e=>{var t,n={};for(t in e)"dc"!==t&&"d"!==t&&(n[t]=e[t].slice(0));return n})(t)),t=e[e.length-1]),D(t,"d",n,n),D(t,"dc",r,r)}function o(e,t,n,r,a,u){var i,o,l,d,f,v=t.schedules,s=v[v.length-1];null!==(i=h(e="L"===e?r-1:e,u,a))?D(s,n,i,i):null!==(i=h(e.replace("W",""),u,a))?(t=t,o=s,d={},f={},1===(l=i)?(D(o,"D",1,3),D(o,"d",c.MON,c.FRI),D(d,"D",2,2),D(d,"d",c.TUE,c.FRI),D(f,"D",3,3)):(D(o,"D",l-1,l+1),D(o,"d",c.MON,c.FRI),D(d,"D",l-1,l-1),D(d,"d",c.MON,c.THU),D(f,"D",l+1,l+1)),D(f,"d",c.TUE,c.FRI),t.exceptions.push(d),t.exceptions.push(f)):null!==(i=h(e.replace("L",""),u,a))?m(v,s,i,r-1):2===(o=e.split("#")).length?m(v,s,h(o[0],u,a),h(o[1])):(l=s,d=n,t=r,f=a,i=u,s=+(v=(v=e).split("/"))[1],"*"!==(v=v[0])&&"0"!==v&&(t=h((v=v.split("-"))[0],i,f),f=h(v[1],i,f)||f),D(l,d,t,f,s))}function n(e){return-1<e.indexOf("#")||0<e.indexOf("L")}function l(e,t){return n(e)&&!n(t)?1:e-t}a=(a=a).toUpperCase();a=e[a]||a;{var d={schedules:[{}],exceptions:[]},f=(u=u?a:"0 "+a).replace(/(\s)+/g," ").split(" ");let t,n,e,r;for(t in i)if(n=i[t],(e=f[n[0]])&&"*"!==e&&"?"!==e){var v=(r=e.split(",").sort(l)).length;for(let e=0;e<v;e++)o(r[e],d,t,n[1],n[2],n[3])}return d}},K.parse.recur=function(){let e=[],t=[],u,i,o,l,d,f,v,s,c,h=e;function r(e,t,n){if(e=d?e+"_"+d:e,u||(h.push({}),u=h[0]),u[e]||(u[e]=[]),i=u[e],l){for(o=[],s=t;s<=n;s+=l)o.push(s);c={n:e,x:l,c:i.length,m:n}}var r=(o=f?[t]:v?[n]:o).length;for(s=0;s<r;s+=1){var a=o[s];i.indexOf(a)<0&&i.push(a)}o=l=d=f=v=0}return{schedules:e,exceptions:t,on:function(){return o=arguments[0]instanceof Array?arguments[0]:arguments,this},every:function(e){return l=e||1,this},after:function(e){return d="a",o=[e],this},before:function(e){return d="b",o=[e],this},first:function(){return f=1,this},last:function(){return v=1,this},time:function(){for(let e=0,t=o.length;e<t;e++){var n=o[e].split(":");n.length<3&&n.push(0),o[e]=3600*+n[0]+60*+n[1]+ +n[2]}return r("t"),this},second:function(){return r("s",0,59),this},minute:function(){return r("m",0,59),this},hour:function(){return r("h",0,23),this},dayOfMonth:function(){return r("D",1,v?0:31),this},weekdayOfMonth:function(){return r("WD",1,v?0:23),this},weekendDayOfMonth:function(){return r("WED",1,v?0:23),this},dayOfWeek:function(){return r("d",1,7),this},onWeekend:function(){return o=[1,7],this.dayOfWeek()},onWeekday:function(){return o=[2,3,4,5,6],this.dayOfWeek()},dayOfWeekCount:function(){return r("dc",1,v?0:5),this},dayOfYear:function(){return r("dy",1,v?0:366),this},dayEx:function(){var e=K.DX.extent(new Date);return r("DX",e[0],e[1]),this},weekOfMonth:function(){return r("wm",1,v?0:5),this},weekOfYear:function(){return r("wy",1,v?0:53),this},weekEx:function(){var e=K.WX.extent(new Date);return r("WX",e[0],e[1]),this},month:function(){return r("M",1,12),this},monthEx:function(){var e=K.MX.extent(new Date);return r("MX",e[0],e[1]),this},year:function(){return r("Y",1970,2450),this},fullDate:function(){for(let e=0,t=o.length;e<t;e++)o[e]=o[e].getTime();return r("fd"),this},customModifier:function(e,t){if(K.modifier[e])return d=e,o=t instanceof Array?t:[t],this;throw new Error("Custom modifier "+e+" not recognized!")},customPeriod:function(e){var t=K[e];if(t)return r(e,t.extent(new Date)[0],t.extent(new Date)[1]),this;throw new Error("Custom time period "+e+" not recognized!")},reference:function(e){e=new Date(e);e=K[c.n].val(e)%c.x;return this.between(e,c.m)},startingOn:function(e){return this.between(e,c.m)},between:function(e,t){return u[c.n]=u[c.n].splice(0,c.c),l=c.x,r(c.n,e,t),this},and:function(){return u=h[h.push({})-1],this},except:function(){return h=t,u=null,this}}},K.parse.text=function(e){let t=K.parse.recur,n,f=0,v="",u={eof:/^$/,rank:/^((\d+)(st|nd|rd|th)?)\b/,time:/^((([0]?[1-9]|1[0-2]):[0-5]\d(\s)?(am|pm))|(([0]?\d|1\d|2[0-3]):[0-5]\d))\b/,dayName:/^((sun|mon|tue(s)?|wed(nes)?|thu(r(s)?)?|fri|sat(ur)?)(day)?)\b/,monthName:/^(jan(uary)?|feb(ruary)?|ma((r(ch)?)?|y)|apr(il)?|ju(ly|ne)|aug(ust)?|oct(ober)?|(sept|nov|dec)(ember)?)\b/,yearIndex:/^(\d\d\d\d)\b/,every:/^every\b/,after:/^after\b/,before:/^before\b/,second:/^(s|sec(ond)?(s)?)\b/,minute:/^(m|min(ute)?(s)?)\b/,hour:/^(h|hour(s)?)\b/,day:/^(day(s)?( of the month)?)\b/,dayInstance:/^day instance\b/,dayOfWeek:/^day(s)? of the week\b/,dayOfYear:/^day(s)? of the year\b/,weekOfYear:/^week(s)?( of the year)?\b/,weekOfMonth:/^week(s)? of the month\b/,weekday:/^weekday\b/,weekend:/^weekend\b/,month:/^month(s)?\b/,year:/^year(s)?\b/,between:/^between (the)?\b/,start:/^(start(ing)? (at|on( the)?)?)\b/,at:/^(at|@)\b/,and:/^(,|and\b)/,except:/^(except\b)/,also:/(also)\b/,first:/^(first)\b/,last:/^last\b/,in:/^in\b/,of:/^of\b/,onthe:/^on the\b/,on:/^on\b/,through:/(-|^(to|through)\b)/},i={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7,"1st":1,fir:1,"2nd":2,sec:2,"3rd":3,thi:3,"4th":4,for:4};function s(e,t,n,r){return{startPos:e,endPos:t,text:n,type:r}}function r(e){var t=e instanceof Array?e:[e],n=/\s+/;let r,a,u,i,o,l;for(t.push(n),o=f;!r||r.type===n;){l=-1,a=v.substring(o),r=s(o,o,v.split(n)[0]);var d=t.length;for(let e=0;e<d;e++)(u=(i=t[e]).exec(a))&&0===u.index&&u[0].length>l&&(l=u[0].length,r=s(o,o+l,a.substring(0,l),i));r.type===n&&(o=r.endPos)}return r}function a(e){e=r(e);return f=e.endPos,e}function o(e){var t=+D(e),n=c(u.through)?+D(e):t,r=[];for(let e=t;e<=n;e++)r.push(e);return r}function l(e){let t=o(e);for(;c(u.and);)t=t.concat(o(e));return t}function d(e){var t=h([u.second,u.minute,u.hour,u.dayOfYear,u.dayOfWeek,u.dayInstance,u.day,u.month,u.year,u.weekOfMonth,u.weekOfYear]);switch(t.type){case u.second:e.second();break;case u.minute:e.minute();break;case u.hour:e.hour();break;case u.dayOfYear:e.dayOfYear();break;case u.dayOfWeek:e.dayOfWeek();break;case u.dayInstance:e.dayOfWeekCount();break;case u.day:e.dayOfMonth();break;case u.weekOfMonth:e.weekOfMonth();break;case u.weekOfYear:e.weekOfYear();break;case u.month:e.month();break;case u.year:e.year();break;default:n=f}return t}function c(e){var t=r(e).type===e;return t&&a(e),t}function h(e){var t=a(e);return t.type?t.text=((e,t)=>{let n=e;switch(t){case u.time:var r=e.split(/(:|am|pm)/),a="pm"===r[3]&&r[0]<12?parseInt(r[0],10)+12:r[0],r=r[2].trim();n=(1===a.length?"0":"")+a+":"+r;break;case u.rank:n=parseInt(/^\d+/.exec(e)[0],10);break;case u.monthName:case u.dayName:n=i[e.substring(0,3)]}return n})(t.text,e):n=f,t}function D(e){return h(e).text}e=e.toLowerCase();f=0,v=e,n=-1;for(var m,x,w,g=t();f<v.length&&n<0;)switch(h([u.every,u.after,u.before,u.onthe,u.on,u.of,u.in,u.at,u.and,u.except,u.also]).type){case u.every:m=g,w=x=void 0,c(u.weekend)?m.on(i.sun,i.sat).dayOfWeek():c(u.weekday)?m.on(i.mon,i.tue,i.wed,i.thu,i.fri).dayOfWeek():(x=D(u.rank),m.every(x),w=d(m),c(u.start)?(x=D(u.rank),m.startingOn(x),h(w.type)):c(u.between)&&(x=D(u.rank),c(u.and))&&(w=D(u.rank),m.between(x,w)));break;case u.after:void 0!==r(u.time).type?(g.after(D(u.time)),g.time()):(g.after(D(u.rank)),d(g));break;case u.before:void 0!==r(u.time).type?(g.before(D(u.time)),g.time()):(g.before(D(u.rank)),d(g));break;case u.onthe:m=g,c(u.first)?m.first():c(u.last)?m.last():m.on(l(u.rank)),d(m);break;case u.on:g.on(l(u.dayName)).dayOfWeek();break;case u.of:g.on(l(u.monthName)).month();break;case u.in:g.on(l(u.yearIndex)).year();break;case u.at:for(g.on(D(u.time)).time();c(u.and);)g.on(D(u.time)).time();break;case u.and:break;case u.also:g.and();break;case u.except:g.except();break;default:n=f}return{schedules:g.schedules,exceptions:g.exceptions,error:n}},K})();